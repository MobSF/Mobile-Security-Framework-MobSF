This is the full command to instrument application using the cpu_monitor.js script

Works if you do in Linux terminal but doesnt work in Python terminal

curl -X POST --url http://localhost:8002/api/v1/frida/instrument --data "hash=2d846265f6569547490fcb38970fc93e&default_hooks=api_monitor,ssl_pinning_bypass,root_bypass,debugger_check_bypass&auxiliary_hooks=enum_class,string_catch,string_compare,enum_methods,search_class,trace_class&class_name=java.io.File&class_search=ssl&class_trace=javax.net.ssl.TrustManager&frida_code=function+monitorCpuUsage%28%29+%7B%0A++var+process+%3D+Java.use%28%27android.os.Process%27%29%3B%0A++var+System+%3D+Java.use%28%27java.lang.System%27%29%3B%0A++var+Runtime+%3D+Java.use%28%27java.lang.Runtime%27%29%3B%0A++var+BufferedReader+%3D+Java.use%28%27java.io.BufferedReader%27%29%3B%0A++var+FileReader+%3D+Java.use%28%27java.io.FileReader%27%29%3B%0A++var+pid+%3D+process.myPid%28%29%3B%0A++var+utime%2C+stime%3B%0A++var+cpuUsage+%3D+0.0%3B%0A++%0A++var+getCPU+%3D+function+%28%29+%7B%0A++++var+reader+%3D+null%3B%0A++++try+%7B%0A++++++reader+%3D+BufferedReader.%24new%28FileReader.%24new%28%22%2Fproc%2F%22+%2B+pid+%2B+%22%2Fstat%22%29%29%3B%0A++++++var+line+%3D+reader.readLine%28%29%3B%0A++++++var+fields+%3D+line.split%28%22+%22%29%3B%0A++++++utime+%3D+parseInt%28fields%5B13%5D%29%3B%0A++++++stime+%3D+parseInt%28fields%5B14%5D%29%3B%0A++++%7D+catch+%28e%29+%7B%0A++++++console.error%28e%29%3B%0A++++%7D+finally+%7B%0A++++++if+%28reader+%21%3D%3D+null%29+%7B%0A++++++++try+%7B%0A++++++++++reader.close%28%29%3B%0A++++++++%7D+catch+%28e%29+%7B%0A++++++++++console.error%28e%29%3B%0A++++++++%7D%0A++++++%7D%0A++++%7D%0A++%7D%3B%0A++%0A++var+updateCPU+%3D+function+%28%29+%7B%0A++++getCPU%28%29%3B%0A++++var+total_time+%3D+utime+%2B+stime%3B%0A++++var+elapsed_time+%3D+System.nanoTime%28%29+-+startTime%3B%0A++++cpuUsage+%3D+%28total_time+-+prevCpuTime%29+%2F+%28elapsed_time+%2F+1000000%29+%2F+cpus+%2A+100%3B%0A++++prevCpuTime+%3D+total_time%3B%0A++++startTime+%3D+System.nanoTime%28%29%3B%0A++%7D%3B%0A++%0A++var+cpus+%3D+Runtime.getRuntime%28%29.availableProcessors%28%29%3B%0A++var+prevCpuTime+%3D+0%3B%0A++var+startTime+%3D+System.nanoTime%28%29%3B%0A++%0A++setInterval%28function%28%29+%7B%0A++++updateCPU%28%29%3B%0A++++send%28%27CPU+usage%3A+%27+%2B+cpuUsage.toFixed%282%29+%2B+%27%25%27%29%3B%0A++%7D%2C+1000%29%3B%0A%7D%0A%0AJava.perform%28monitorCpuUsage%29%3B%0A" -H "Authorization:5d0681a6cc7681b53b99c3d9b73738c9fbf9b33e7b913abb12e0d01237df6c2c"
